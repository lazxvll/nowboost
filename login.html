<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Вход - NowCore</title>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700&display=swap" rel="stylesheet">
    <style>/* Стили остаются без изменений */ body{background-color:#121218;background-image:radial-gradient(circle at 20% 20%,rgba(59,130,246,.15),transparent 40%);color:#fff;font-family:'Manrope',sans-serif;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;padding:20px;box-sizing:border-box}.login-container{background-color:#1c1c22;padding:40px;border-radius:12px;border:1px solid #2a2a2e;width:100%;max-width:400px;text-align:center}.login-container h1{font-size:2rem;margin-top:0;margin-bottom:30px}.input-group{margin-bottom:20px;text-align:left}.input-group label{display:block;margin-bottom:8px;color:#aeb1b8;font-size:.9rem}.input-group input{width:100%;padding:12px;background-color:#121218;border:1px solid #3a3a3e;border-radius:6px;color:#fff;font-size:1rem;box-sizing:border-box;transition:border-color .2s}.input-group input:focus{outline:0;border-color:#3b82f6}.login-button{width:100%;padding:14px;background-color:#3b82f6;color:#fff;border:none;border-radius:6px;font-size:1rem;font-weight:500;cursor:pointer;transition:background-color .2s}.login-button:hover:not(:disabled){background-color:#2563eb}.login-button:disabled{background-color:#373f50;color:#7d8590;cursor:not-allowed}.error-message{color:#ef4444;margin-top:15px;font-size:.9rem;height:20px}</style>
</head>
<body>
    <div class="login-container">
        <h1>Вход в кабинет</h1>
        <!-- Форма теперь отправляет данные в невидимый iframe, чтобы страница не перезагружалась -->
        <form id="login-form" action="ВАШ_URL_СКРИПТА_ТУТ" method="POST" target="hidden-iframe">
            <div class="input-group">
                <label for="nickname-input">Никнейм</label>
                <input type="text" id="nickname-input" required>
            </div>
            <div class="input-group">
                <label for="hwid-input">HWID</label>
                <input type="text" id="hwid-input" required>
            </div>
            <!-- Скрытые поля, которые будут отправлены -->
            <input type="hidden" name="nickname" id="nickname-hidden">
            <input type="hidden" name="hwid" id="hwid-hidden">
            
            <p id="error-message"></p>
            <button type="submit" class="login-button" disabled>Войти</button>
        </form>
    </div>
    <!-- Невидимый iframe для отправки формы без перезагрузки -->
    <iframe name="hidden-iframe" style="display:none;"></iframe>

    <script>
        const loginForm = document.getElementById('login-form');
        const errorMessage = document.getElementById('error-message');
        const submitButton = loginForm.querySelector('.login-button');
        const nicknameInput = document.getElementById('nickname-input');
        const hwidInput = document.getElementById('hwid-input');
        const nicknameHidden = document.getElementById('nickname-hidden');
        const hwidHidden = document.getElementById('hwid-hidden');

        // Вставьте сюда URL вашего скрипта
        loginForm.action = "https://script.google.com/macros/s/AKfycbxwIooOY-0zZoS72Vqh8WSBeYhbD6juWYdG1w5JlnTjnaELAnqEeLZzMsHGle6IRyHZ/exec";

        // Проверяем, есть ли в URL метка об ошибке
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('error') === '1') {
            errorMessage.textContent = 'Неверный никнейм или HWID.';
        } else if (urlParams.get('error') === '2') {
             errorMessage.textContent = 'Произошла системная ошибка. Попробуйте снова.';
        }
        
        function validateForm() {
            const isFilled = nicknameInput.value.trim() !== '' && hwidInput.value.trim() !== '';
            submitButton.disabled = !isFilled;
        }
        nicknameInput.addEventListener('input', validateForm);
        hwidInput.addEventListener('input', validateForm);

        loginForm.addEventListener('submit', () => {
            // Перед отправкой копируем значения в скрытые поля
            nicknameHidden.value = nicknameInput.value;
            hwidHidden.value = hwidInput.value;
            
            submitButton.disabled = true;
            submitButton.textContent = 'Проверка...';
        });
    </script>
</body>
</html>
